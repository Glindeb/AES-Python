\mychapter{Diskussion} % Diskussion av resultat, presentera och tolka resultatet samt för ett nyanserat resonemang om vad resultatet betyder. Diskutera även eventuella brister i experimentet och hur dessa kan förbättras.
\label{chap:discussion}

% Tolka resultatet från nyckellängds undersökningen (To be rewived)
Utifrån resultatet från undersökningen går det att se hur tiden det tar att kryptera en fil på 1MB ökar när man använder längre nycklar så som 192-\gls{bit} 256-\gls{bit} nycklar
i förhållande till en 128-\gls{bit} nyckel. Något som bland annat visar sig när man tittar på den procentuella tidskillnaden mellan de olika nyckellängderna. Där kan man se en
tids skillnad på 18,8\% mellan 128-\gls{bit} \& 192-\gls{bit} nyckeln och 27,8\% mellan 128-\gls{bit} \& 256-\gls{bit} nyckeln.

Anledningen till denna tidökning är något som exempelvis kan bero på antalet rundor som genomförs för varje 16-\gls{byte} block som krypteras, vilket är den huvudsakliga
skillnaden mellan det olika nyckellängderna. Eftersom för en 128-\gls{bit} nyckel så genomförs 10 rundor för varje 16-\gls{byte} block som krypteras, medan för en 192-\gls{bit}
nyckel så genomförs 12 rundor och för en 256-\gls{bit} nyckel så genomförs 14 rundor. Något som då höjer antalet operationer som genomförs för varje 16-\gls{byte} block, vilket
i sin tur då troligen höjer den totala krypterings tiden.

% Tolka resultatet från körläges undersökningen (To be rewived)
Resultatet visar även att skillnaden i krypteringstid mellan olika körlägen är väldigt liten. Mellan \acrshort{ecb} \& \acrshort{cbc} var skillnaden 0,3\% och mellan \acrshort{ecb}
\& \acrshort{ofb} var skillnaden 0,4\%. Något som inte riktigt var väntat då det för både \acrshort{cbc} och \acrshort{ofb}
genomförs en ytterligare operation mellan varje 16-\gls{byte} block som krypteras för att länka ihop de olika blocken. Men samtidigt så är denna extra operation en \gls{xor}-operation
som är relativt lätt och snabb för en dator att genomföra. Något som då innebär att trots att det genomförs en extra operation så är den ändå relativt snabb och därför inte
påverkar krypterings tiden särskilt mycket.

I resultatet av körläges testet kan man dock även se en viss spridning i tiden som det tar att kryptera en fil mellan det olika omgångarna. Detta bland annat när man jämför
max och min tiderna för det olika körlägena. Där går det att se hur exempelvis se när man tittar på maxvärdet för \acrshort{ecb} som är 21,0857602999968 s, vilket är högre än
maxvärdet för \acrshort{cbc} som är 20,9346826999972 s och \acrshort{ofb} som är 20,8816630000001 s. En skillnad som då påvisar att det finns en viss osäkerhet i
resultatet och ytterligare bekräftas ifall man tittar på medelvärdes tiderna.
Logiskt sett borde finnas en liten tidsökning i när man till för en extra operation. Detta innebär då att det resultat som undersökningen genererat för
körläges testet troligen inte är särskilt tillförlitligt.

% Tolka resultatet från krypteringsmetod undersökningen (To be rewived)
Tittar man sedan istället på hur säkerheten påverkas av det olika körlägena så kan man ganska tydligt se att \acrshort{ecb} är det mest osäkra körläget för större data mängder.
Detta då man som visas i resultatet kan se hur trots kryptering fortfarande kan se spår av den ursprungliga bilden i informationen som krypterats. Något som inte
går att göra när bilden istället krypteras med hjälp av \acrshort{cbc} eller \acrshort{ofb}.

% Utvärdera metoden (nyanserat resonemang) (To be rewied)
Metoden som användes för att genomföra undersökningen bär med sig både för och nackdelar. Bland annat så medför metoden en ökad förståelse för hur \acrfull{aes} fungerar
på en låg nivå tack vare det faktum att implementeringen av algoritmen gjordes specifikt för undersökningen. En förståelse som gör det lättare att formulera resonemang och
dra slutsatser om hur \acrshort{aes} fungerar. Vilket är något som skulle gå förlorat ifall man istället använt en befintlig implementation av \acrshort{aes}. Men att implementera
\acrshort{aes} på egenhand innebär också att det finns en risk för att implementeringen av algoritmen inte är helt korrekt och är även en tidskrävande process som kräver
mycket arbete. Något som kan ses som en nackdel som skulle kunna undvikas ifall en befintlig implementation av \acrshort{aes} använts.

En fördel med metoden när det gäller just nyckellängds testet är att säkerheten med resultatet stärks genom att varje nyckel testas flera gånger, vilket då medför att
potentiell slumpmässiga felkällor som kan påverka resultatet minskas. Men samtidigt så innebär detta att tiden som krävs för att genomföra undersökningen ökar. Något som
då påverkar hur stora filer som går att testa för att kunna genomföra undersökningen inom en rimlig tidsrymd.

Ytterligare fördelar med metoden är att den till stor del är automatiserad, vilket då minskar den mänskliga faktorns påverkan. Samtidigt som det gör det lättare att
repetera undersökningen fler gånger med liten variabilitet, vilket då gör att man får ett mer tillförlitligt resultat. Sedan så är
en annan fördel att det lätt går att jämföra och urskilja skillnader i säkerheten för stora data mängder mellan olika körlägen tack vare att en bild användes som testdata.
Vilket då ger en tydlig visuell indikation på hur säkerheten påverkas av det olika körlägena.

\section{Felkällor} % Variabilitet i klockhastighet, Ogämnheter i implementeringen som resulterar i missvisande tider, osäkerhet host mätmetoden, fel i implementeringen, ????
Om man ska titta på felkällorna som finns i undersökningen så finns det bland annat som nämnts tidigare en risk för att implementeringen av \acrshort{aes} inte är helt korrekt. Vilket
då skulle kunna påverka resultatets tillförlitlighet.

Sedan så skulle en felkälla kunna vara variabilitet i klockhastigheten hos datorn som undersökningen utfördes på. Eftersom ifall
den varierar mellan omgångarna så innebär de att antalet instruktioner som datorns CPU hinner med på en viss tid förändras, vilket då leder till en viss osäkerhet i resultatet.


\section{Förbättringar} % Öka antalet reppetitioner för att minskar risken för fel, använda andra metoder för att mäta tiden, testa olika nycklar för att se hur de påverkar, Dubbelkolla implementeringen, testa med andra filstorlekar och gämföra om inehållet i filerna har betydlese, Begränsa kolckhastigheten ytterligare, Utföra undersökningen i en mer kontrolerad testmiljö
Möjliga förbättringar som skulle kunna genomföras för att få ett mer tillförlitligt resultat skulle exempelvis kunna vara att öka antalet omgångar som varje nyckel och körläge
testas. Vilket då skulle kunna minska risken för att resultatet blir påverkat av slumpmässiga felkällor så som variationer i klockhastigheten.

Kontrollera implementeringen ytterligare

Större filstorlekar för att se om man det är samma för olika storlekar

\section{Slutsats} % Besvara frågeställningarna och kanske koppla lite till syftet med undersökningen
Om man nu ska besvara frågeställningen "Hur påverkas tiden de tar att kryptera något mellan de olika nyckel längderna 128-bit, 192-bit och 256-bit nyckel?" så visar resultatet från
undersökningen tydligt hur tiden det tar att kryptera något ökar ganska mycket i takt med att nyckeln blir längre.
